{% extends "base.html" %}
{% load static %}

{% load crispy_forms_tags   %}
{% load widget_tweaks %}

{% block content %}<br><br>
<div class="form-group input-group">
	<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
	<input name="consulta" id="txt_consulta" placeholder="Consultar" type="text" class="form-control">
 </div>
<table class="table table-responsive">
    <thead class="thead-dark ">
      <tr>
        <th scope="col">Numero Procolo</th>
        <th scope="col">Dias uteis</th>
        <th scope="col">Data Inicial</th>
        <th scope="col">Data Final</th>
        <th scope="col">Valor Passagem</th>
        <th scope="col">Valor Translado</th>
        <th scope="col">Cargo</th>
        <th scope="col">Estado</th>
        <th scope="col">Cidade</th>
        <th scope="col">Atualizado em</th>
        <th scope="col">Ações</th>
      </tr>
    </thead>
    {% for value in List%}
    <tbody>
      <tr>
        <th scope="row">{{value.numero_protocolo}}</th>
        <td>{{value.dias_utei}}</td>
        <td>{{value.data_inical}}</td>
        <td>{{value.data_final}}</td>
        <td>{{value.valor_passagem}}</td>
        <td>{{value.valor_translado}}</td>
        <td>{{value.cargo}}</td>
        <td>{{value.estado}}</td>
        <td>{{value.cidade}}</td>
        <td>{{value.update_at}}</td>
        <td>
            <button class="btn btn-primary" ><a href="{% url 'listarcalculo' value.numero_protocolo %}" style="color: white;">Editar&nbsp</a></button>
            <button class="btn btn-danger" ><a href="#" onclick="DeletarViagem({{value.numero_protocolo}})" style="color: white;">Excluir</a</button>
        </td>
      </tr>
    </tbody>
    {% endfor %}

 
  </table>
  <div class="pagination">
    <span class="step-links">
        {% if List.has_previous %}
            <a href="?page={{ List.previous_page_number }}">Anterior</a>
        {% endif %}
    
        <span class="current">
            {{ List.number }} de {{ List.paginator.num_pages }}
        </span>
    
        {% if List.has_next %}
            <a href="?page={{ List.next_page_number }}">Próxima</a>
        {% endif %}
    </span>
</div>
 
<script>
  function DeletarViagem(id){

    Swal.fire({
  title: 'Deseja realmente excluir a viagem?',
  text: "Esta ação é irreversivel !",
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  CancelButtonText:'cancelar',
  confirmButtonText: 'Sim excluir!'
}).then((result) => {
  if (result.isConfirmed) {
    window.location.href="../deletar/"+id+""

  }
})


  }

</script>


{% endblock %}